!function(b,a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):b.jQuery)}(this,function(b){"use strict";function d(f){var d,b,e,a,g,h,c,i={};for(c=0,h=(g=f.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",")).length;c<h&& -1===(b=g[c]).search(/^(http|https|ftp):\/\//)&& -1!==b.search(":");c++)d=b.indexOf(":"),e=b.substring(0,d),(a=b.substring(d+1))||(a=void 0),"string"==typeof a&&(a="true"===a||"false"!==a&&a),"string"==typeof a&&(a=isNaN(a)?a:+a),i[e]=a;return null==e&&null==a?f:i}function a(g,a,c){if(this.$element=b(g),"string"==typeof a&&(a=d(a)),c?"string"==typeof c&&(c=d(c)):c={},"string"==typeof a)a=a.replace(/\.\w*$/,"");else if("object"==typeof a)for(var f in a)a.hasOwnProperty(f)&&(a[f]=a[f].replace(/\.\w*$/,""));this.settings=b.extend({},e,c),this.path=a,this.init()}var c="vide",e={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0};a.prototype.init=function(){var e,g,i,f,a=this,d=function(e){var f,a,b,g=(e=""+e).split(/\s+/),c="50%",d="50%";for(b=0,f=g.length;b<f;b++)"left"===(a=g[b])?c="0%":"right"===a?c="100%":"top"===a?d="0%":"bottom"===a?d="100%":"center"===a?0===b?c="50%":d="50%":0===b?c=a:d=a;return{x:c,y:d}}(a.settings.position),h="";a.$wrapper=b("<div>").css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":d.x+" "+d.y}),e=a.path,"object"==typeof a.path&&(a.path.poster?e=a.path.poster:a.path.mp4?e=a.path.mp4:a.path.webm?e=a.path.webm:a.path.ogv&&(e=a.path.ogv)),"detect"===a.settings.posterType?(i=function(b){a.$wrapper.css("background-image","url("+b+")")},f=function(){i(this.src)},b('<img src="'+(g=e)+'.gif">').load(f),b('<img src="'+g+'.jpg">').load(f),b('<img src="'+g+'.jpeg">').load(f),b('<img src="'+g+'.png">').load(f)):"none"!==a.settings.posterType&&a.$wrapper.css("background-image","url("+e+"."+a.settings.posterType+")"),"static"===a.$element.css("position")&&a.$element.css("position","relative"),a.$element.prepend(a.$wrapper),"object"==typeof a.path?(a.path.mp4&&(h+='<source src="'+a.path.mp4+'.mp4" type="video/mp4">'),a.path.webm&&(h+='<source src="'+a.path.webm+'.webm" type="video/webm">'),a.path.ogv&&(h+='<source src="'+a.path.ogv+'.ogv" type="video/ogv">'),a.$video=b("<video>"+h+"</video>")):a.$video=b('<video><source src="'+a.path+'.mp4" type="video/mp4"><source src="'+a.path+'.webm" type="video/webm"><source src="'+a.path+'.ogv" type="video/ogg"></video>'),a.$video.prop({autoplay:a.settings.autoplay,loop:a.settings.loop,volume:a.settings.volume,muted:a.settings.muted,defaultMuted:a.settings.muted,playbackRate:a.settings.playbackRate,defaultPlaybackRate:a.settings.playbackRate}).css({margin:"auto",position:"absolute","z-index":-1,top:d.y,left:d.x,"-webkit-transform":"translate(-"+d.x+", -"+d.y+")","-ms-transform":"translate(-"+d.x+", -"+d.y+")","-moz-transform":"translate(-"+d.x+", -"+d.y+")",transform:"translate(-"+d.x+", -"+d.y+")",visibility:"hidden"}).one("canplaythrough."+c,function(){a.resize()}).one("playing."+c,function(){a.$video.css("visibility","visible"),a.$wrapper.css("background-image","none")}),a.$element.on("resize."+c,function(){a.settings.resizing&&a.resize()}),a.$wrapper.append(a.$video)},a.prototype.getVideoObject=function(){return this.$video[0]},a.prototype.resize=function(){if(this.$video){var c=this.$video[0].videoHeight,d=this.$video[0].videoWidth,a=this.$wrapper.height(),b=this.$wrapper.width();this.$video.css(a/c<b/d?{width:b+2,height:"auto"}:{width:"auto",height:a+2})}},a.prototype.destroy=function(){this.$element.off(c),this.$video&&this.$video.off(c),delete b[c].lookup[this.index],this.$element.removeData(c),this.$wrapper.remove()},b[c]={lookup:[]},b.fn[c]=function(d,e){var f;return this.each(function(){(f=b.data(this,c))&&f.destroy(),(f=new a(this,d,e)).index=b[c].lookup.push(f)-1,b.data(this,c,f)}),this},b(document).ready(function(){var a=b(window);a.on("resize."+c,function(){for(var a,e=b[c].lookup.length,d=0;d<e;d++)(a=b[c].lookup[d])&&a.settings.resizing&&a.resize()}),a.on("unload."+c,function(){return!1}),b(document).find("[data-vide-bg]").each(function(g,d){var a=b(d),e=a.data(c+"-options"),f=a.data(c+"-bg");a[c](f,e)})})})